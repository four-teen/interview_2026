<!DOCTYPE html>
<html
  lang="en"
  class="light-style customizer-hide"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />

    <title>SKSU Centralized Interview System</title>

    <meta
      name="description"
      content="Centralized interview management system for SKSU tertiary placement test passers."
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link rel="stylesheet" href="assets/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="assets/vendor/css/core.css" />
    <link rel="stylesheet" href="assets/vendor/css/theme-default.css" />
    <link rel="stylesheet" href="assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link
      rel="stylesheet"
      href="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css"
    />

    <!-- Page CSS -->
    <link
      rel="stylesheet"
      href="assets/vendor/css/pages/page-auth.css"
    />

    <!-- Helpers -->
    <script src="assets/vendor/js/helpers.js"></script>
    <script src="assets/js/config.js"></script>

    <!-- Google Identity Services -->
    <script
      src="https://accounts.google.com/gsi/client"
      async
      defer
    ></script>
  </head>

  <body>
    <!-- Content -->

    <div class="container-xxl">
      <div class="authentication-wrapper authentication-basic container-p-y">
        <div class="authentication-inner">

          <!-- Login Card -->
          <div class="card">
            <div class="card-body">

              <!-- Branding -->
              <div class="app-brand justify-content-center mb-3">
                <a href="#" class="app-brand-link gap-2">
                  <span class="app-brand-logo demo">
                    <i class="bx bx-buildings bx-md text-primary"></i>
                  </span>
                  <span class="app-brand-text demo text-body fw-bolder">
                    SKSU Interview
                  </span>
                </a>
              </div>

              <h4 class="mb-2 text-center">
                Centralized Interview System
              </h4>
              <p class="mb-3 text-center">
                For Tertiary Placement Test Passers<br />
                <small class="text-muted">
                  Sultan Kudarat State University Â· 7 Campuses
                </small>
              </p>

              <!-- Notice -->
              <div class="alert alert-info small" role="alert">
                Only official SKSU organizational Google accounts are allowed to
                access this system.
              </div>

              <!-- Google Login -->
              <div class="mb-3">
                <div
                  id="g_id_onload"
                  data-client_id="115027937761-p80e2nudpe4ldsg9kbi73qc5o9nhg07p.apps.googleusercontent.com"
                  data-callback="handleGoogleCredential"
                  data-auto_prompt="false"
                ></div>

                <div class="d-grid">
                  <div
                    class="g_id_signin"
                    data-type="standard"
                    data-size="large"
                    data-theme="outline"
                    data-text="continue_with"
                    data-shape="rectangular"
                    data-logo_alignment="left"
                    data-width="100%"
                  ></div>
                </div>

                <div
                  id="loginMsg"
                  class="mt-3 small text-center text-muted"
                ></div>
              </div>

              <p class="text-center small mb-0">
                Login will be validated against the university account registry.
              </p>
            </div>
          </div>

          <!-- What to Expect -->
          <div class="card mt-4">
            <div class="card-body">
              <h6 class="mb-3">
                What to expect after login
              </h6>

              <div class="row g-3">
                <div class="col-6">
                  <div class="border rounded p-3 text-center">
                    <div class="text-muted small">
                      Campuses Covered
                    </div>
                    <div class="fs-4 fw-bold">
                      7
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="border rounded p-3 text-center">
                    <div class="text-muted small">
                      Interview Rule
                    </div>
                    <div class="fs-6 fw-bold">
                      One-time only
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="border rounded p-3 text-center">
                    <div class="text-muted small">
                      Monitoring
                    </div>
                    <div class="fs-6 fw-bold">
                      Cross-campus
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="border rounded p-3 text-center">
                    <div class="text-muted small">
                      Remedy
                    </div>
                    <div class="fs-6 fw-bold">
                      Score transfer
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- /What to Expect -->

        </div>
      </div>
    </div>

    <!-- Core JS -->
    <script src="assets/vendor/libs/jquery/jquery.js"></script>
    <script src="assets/vendor/libs/popper/popper.js"></script>
    <script src="assets/vendor/js/bootstrap.js"></script>
    <script src="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="assets/vendor/js/menu.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Login Logic -->
<script>
function handleGoogleCredential(response) {
  const msg = document.getElementById("loginMsg");

  msg.className = "mt-3 small text-center text-success";
  msg.textContent = "Login successful. Validating account...";

  fetch('auth/google_callback.php', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    },
    body: new URLSearchParams({
      credential: response.credential
    })
  })
  .then(res => res.json())
  .then(data => {
    if (!data.success) {
      throw new Error(data.message || 'Authentication failed');
    }

    window.location.href = data.redirect;
  })
  .catch(err => {
    console.error(err);
    msg.className = "mt-3 small text-center text-danger";
    msg.textContent = "Authentication failed. Please contact the system administrator.";
  });
}
</script>


  </body>
</html>
